<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denver FitOps</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        [x-cloak] { display: none !important; }
        body { background-color: #0f172a; color: #f8fafc; } /* Dark Mode for "Corporate Gym" vibe */
    </style>
</head>
<body class="antialiased">

    <div x-data="liveScheduler()" x-init="fetchData()" class="max-w-4xl mx-auto p-4 sm:p-6">
        
        <header class="mb-8 border-b border-slate-700 pb-6 flex justify-between items-end">
            <div>
                <h1 class="text-3xl font-extrabold text-white tracking-tight">âš¡ FitOps: Denver</h1>
                <p class="text-slate-400 text-sm mt-1">Status: <span class="text-emerald-400 font-mono">OPERATIONAL</span></p>
            </div>
            <div class="text-right">
                <p class="text-xs text-slate-500 uppercase">Last Sync</p>
                <p class="text-sm font-mono text-slate-300" x-text="lastUpdate"></p>
            </div>
        </header>

        <div class="flex gap-4 mb-6 overflow-x-auto pb-2">
            <button @click="selectedType = 'all'" :class="selectedType === 'all' ? 'bg-indigo-600 text-white' : 'bg-slate-800 text-slate-400'" class="px-4 py-2 rounded-full text-sm font-bold transition">All</button>
            <button @click="selectedType = 'Strength'" :class="selectedType === 'Strength' ? 'bg-blue-600 text-white' : 'bg-slate-800 text-slate-400'" class="px-4 py-2 rounded-full text-sm font-bold transition">Strength</button>
            <button @click="selectedType = 'Cardio'" :class="selectedType === 'Cardio' ? 'bg-orange-600 text-white' : 'bg-slate-800 text-slate-400'" class="px-4 py-2 rounded-full text-sm font-bold transition">Cardio</button>
            <button @click="selectedType = 'Yoga'" :class="selectedType === 'Yoga' ? 'bg-emerald-600 text-white' : 'bg-slate-800 text-slate-400'" class="px-4 py-2 rounded-full text-sm font-bold transition">Yoga</button>
        </div>

        <div x-show="isLoading" class="text-center py-12 text-slate-500">Initializing Uplink...</div>

        <div x-show="!isLoading" class="space-y-4">
            <template x-for="(cls, index) in filteredClasses" :key="index">
                <div class="bg-slate-800 rounded-xl p-5 border-l-4 shadow-lg flex justify-between items-center"
                     :class="{
                        'border-orange-500': cls.Type === 'Cardio',
                        'border-blue-500': cls.Type === 'Strength',
                        'border-emerald-500': cls.Type === 'Yoga',
                        'border-cyan-400': cls.Type === 'Water'
                     }">
                    
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider" x-text="cls.Day"></span>
                            <span class="text-xs font-mono text-slate-500" x-text="cls.Time"></span>
                        </div>
                        <h3 class="text-lg font-bold text-white" x-text="cls.Name"></h3>
                        <p class="text-xs text-slate-400 mt-1" x-text="cls.Gym"></p>
                    </div>

                    <div class="text-right">
                         <a :href="'https://www.google.com/calendar/render?action=TEMPLATE&text=' + encodeURIComponent(cls.Name) + ' at ' + encodeURIComponent(cls.Gym)" 
                            target="_blank"
                            class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-slate-700 hover:bg-indigo-600 text-slate-300 hover:text-white transition">
                            ðŸ“…
                         </a>
                    </div>
                </div>
            </template>
        </div>
        
        <div x-show="!isLoading && filteredClasses.length === 0" class="text-center py-12 text-slate-500" x-cloak>
            No classes found for this filter.
        </div>
    </div>

    <script>
        function liveScheduler() {
            return {
                isLoading: true,
                classes: [],
                selectedType: 'all',
                lastUpdate: 'Pending...',
                
                // âš ï¸ ACTION REQUIRED: CHANGE 'YOUR_GITHUB_USERNAME' TO YOUR ACTUAL USERNAME BELOW
                csvUrl: 'https://raw.githubusercontent.com/github.com/tiredofthissong/denver-fit-dashboard/main/fitness_schedule.csv',

                fetchData() {
                    Papa.parse(this.csvUrl, {
                        download: true,
                        header: true,
                        skipEmptyLines: true,
                        complete: (results) => {
                            this.classes = results.data;
                            this.lastUpdate = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                            this.isLoading = false;
                        },
                        error: (err) => {
                            console.error("Data Error:", err);
                            this.isLoading = false; 
                        }
                    });
                },

                get filteredClasses() {
                    if (this.selectedType === 'all') return this.classes;
                    return this.classes.filter(c => c.Type === this.selectedType);
                }
            }
        }
    </script>
</body>
</html>
